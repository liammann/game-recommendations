(function(){function t(t,n){if(e[t])return n(e[t]);$.ajax({url:t,success:function(r){e[t]=r;n(r)},error:function(e,t,n){console.log(e,t,n)},dataType:"text"})}var e={};window.init={ctx:function(e,t){e.data={};e.recom={};t()}};window.route={home:function(e,n){t("/l/public/games2.json",function(t){e.data.games=JSON.parse(t).games;e.data.games.forEach(function(t,n){e.data.games[n].averageRating=Math.floor(e.data.games[n].averageRating)},e)});t("/l/public/games3.json",function(t){e.data.popular=JSON.parse(t).games;e.data.popular.forEach(function(t,n){e.data.popular[n].averageRating=Math.floor(e.data.popular[n].averageRating)},e)});t("/l/public/games4.json",function(t){e.data.top=JSON.parse(t).games;e.data.top.forEach(function(t,n){e.data.top[n].averageRating=Math.floor(e.data.top[n].averageRating)},e)});t("/l/views/home.html",function(t){e.data.index=0;e.recom.content=t;$(".carousel").carousel({interval:100});n()})},games:function(e,n){t("/l/public/games.json",function(t){e.data.games=JSON.parse(t).games;e.data.games.forEach(function(t,n){e.data.games[n].averageRating=Math.floor(e.data.games[n].averageRating)},e)});t("/l/views/games.html",function(t){e.data.index=1;console.log(e);e.recom.content=t;n()})},game:function(e,n){t("/l/public/game1.json",function(r){e.data.game=JSON.parse(r).game;e.data.game.averageRating=Math.floor(e.data.game.averageRating);e.data.game.releaseDate=(new Date(e.data.game.releaseDate)).toDateString();t("/l/views/game.html",function(t){e.recom.content=t;n()})})},friends:function(e,n){t("/l/public/friends.json",function(r){e.data.friends=JSON.parse(r).user;t("/l/views/friends.html",function(t){e.recom.content=t;n()})})},orders:function(e,n){t("/l/public/orders.json",function(t){e.data.orders=JSON.parse(t).orders;e.data.orders.forEach(function(t,n){e.data.orders[n].orderDate=(new Date(e.data.orders[n].orderDate)).toDateString()},e)});t("/l/views/orders.html",function(t){console.log(e.data);e.recom.content=t;n()})}};window.render={content:function(e,n){t("views/content.html",function(t){var n=Hogan.compile(t),r=n.render(e.data,e.recom);$("#content").empty().append(r);changeActive(e.data.index);typeof done=="function"&&done(e.data.index)})}};window.done=null})();